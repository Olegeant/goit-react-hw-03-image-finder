(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={Button:"Button_Button__1mqHX",ButtonLoading:"Button_ButtonLoading__2zcQU Button_Button__1mqHX",ButtonText:"Button_ButtonText__1_nJL",rotate:"Button_rotate__BUN8k"}},11:function(e,t,a){e.exports={Notification:"Notification_Notification__1NQSE",Message:"Notification_Message__2ncF3",info:"Notification_info__PPAX_",warning:"Notification_warning__zYUqL",error:"Notification_error__3bF65"}},12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__1q57T",Modal:"Modal_Modal__2RT_S",CloseBtn:"Modal_CloseBtn__248JT"}},13:function(e,t,a){e.exports={Arrow:"ScrollArrow_Arrow__pgxIc",ArrowUp:"ScrollArrow_ArrowUp__1GOC0 ScrollArrow_Arrow__pgxIc",ArrowDown:"ScrollArrow_ArrowDown__39y96 ScrollArrow_Arrow__pgxIc"}},15:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2V_LK","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__2GDvy"}},17:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__3hUNl"}},19:function(e,t,a){e.exports={Loader:"Loader_Loader__EQ6dL"}},25:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(8),i=a.n(o),c=(a(24),a(25),a(16)),s=a(3),l=a(4),u=a(6),d=a(5),h=a(7),m=(a(26),"https://pixabay.com/api/"),g="21850804-e13ac47ee6c84255406cdac88",p={};var f={fetchImages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=new URLSearchParams({image_type:"photo",orientation:"horizontal",q:e,page:t,per_page:12,key:g}),r=m+"?"+a;return fetch(r,p).then((function(e){return e.ok?e.json():Promise.reject(new Error("Unexpected error from server side"))}))}},b=a(9),y=a.n(b),j=a(1),w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:""},e.handleQueryChange=function(t){e.setState({searchQuery:t.target.value.toLowerCase()})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.searchQuery.trim();a?(e.props.onSubmit(a),e.setState({searchQuery:""})):h.b.error("Enter search query")},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery,t=this.handleSubmit,a=this.handleQueryChange;return Object(j.jsx)("header",{className:y.a.Searchbar,children:Object(j.jsxs)("form",{className:y.a.SearchForm,onSubmit:t,children:[Object(j.jsx)("button",{type:"submit",className:y.a["SearchForm-button"],children:Object(j.jsx)("span",{className:y.a["SearchForm-button-label"],children:"Search"})}),Object(j.jsx)("input",{className:y.a["SearchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:a})]})})}}]),a}(r.Component),_=a(17),v=a.n(_),O=a(15),S=a.n(O);var x=function(e){var t=e.url,a=e.id,r=e.tags;return Object(j.jsx)("li",{className:S.a.ImageGalleryItem,children:Object(j.jsx)("img",{src:t,"data-id":a,alt:r,className:S.a["ImageGalleryItem-image"]})})};var k=function(e){var t=e.images,a=e.onImgClick;return Object(j.jsx)("ul",{className:v.a.ImageGallery,onClick:function(e){if(e.target!==e.currentTarget){var t=Number(e.target.dataset.id);a(t)}},children:t.map((function(e){return Object(j.jsx)(x,{id:e.id,url:e.webformatURL,tags:e.tags},e.id)}))})},C=a(10),I=a.n(C);function L(e){var t=e.onClick,a=e.loading,r=e.children;return Object(j.jsx)("button",{type:"button",onClick:function(){a||t()},className:a?I.a.ButtonLoading:I.a.Button,children:Object(j.jsx)("span",{className:I.a.ButtonText,children:r})})}var N=L;L.defaultProps={loading:!1};var A=a(11),B=a.n(A);function M(e){var t=e.type,a=e.children;return Object(j.jsx)("div",{className:B.a.Notification,children:Object(j.jsx)("p",{className:[B.a.Message,B.a[t]].join(" "),children:a})})}var D=M;M.defaultProps={type:"info"};var U=a(18),F=a.n(U),E=a(19),Q=a.n(E);function G(e){var t=e.type,a=e.color,r=e.height,n=e.width;return Object(j.jsx)(F.a,{className:Q.a.Loader,type:t,color:a,height:r,width:n})}var T=a(12),R=a.n(T),P=document.querySelector("#modal-root"),q=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleBackdropClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.image,a=t.largeImageURL,r=t.tags,n=e.onClose,i=this.handleBackdropClick;return Object(o.createPortal)(Object(j.jsxs)("div",{className:R.a.Overlay,onClick:i,children:[Object(j.jsx)("div",{className:R.a.Modal,children:Object(j.jsx)("img",{src:a,alt:r})}),Object(j.jsx)("button",{type:"button",className:R.a.CloseBtn,onClick:n,children:"\u2716"})]}),P)}}]),a}(r.Component);function H(e,t){var a,r,n=!1;return function o(){if(n)return a=arguments,void(r=this);e.apply(this,arguments),n=!0,setTimeout((function(){n=!1,a&&(o.apply(r,a),a=r=null)}),t)}}var X=a(13),J=a.n(X),K=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={isArrowShown:!1},e.onArrowClick=function(){switch(e.props.type){case"up":window.scrollTo({top:0,left:window.pageXOffset,behavior:"smooth"});break;case"down":window.scrollTo({top:document.body.scrollHeight,left:window.pageXOffset,behavior:"smooth"})}},e.scrollManager=function(){switch(e.props.type){case"up":e.setState({isArrowShown:window.pageYOffset>document.documentElement.clientHeight});break;case"down":e.setState({isArrowShown:window.pageYOffset+2*document.documentElement.clientHeight<document.body.scrollHeight})}},e.throttledScrollManager=H(e.scrollManager,500),e.makeArrowStyles=function(){switch(e.props.type){case"up":return J.a.ArrowUp;case"down":return J.a.ArrowDown;default:return J.a.ArrowUp}},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.throttledScrollManager)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.throttledScrollManager)}},{key:"render",value:function(){var e=this.onArrowClick,t=this.makeArrowStyles;return this.state.isArrowShown?Object(j.jsx)("div",{className:t(),onClick:e}):null}}]),a}(r.Component),Y="idle",z="pending",W="resolved",V="rejected",Z=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={searchQuery:"",pagesDisplayed:1,images:[],error:null,status:Y,isModalOpen:!1,modalImage:null,isLoading:!1,isLoadBtnShown:!1},e.handleData=function(t){return t.hits.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}})).filter((function(t){return!e.state.images.some((function(e){return e.id===t.id}))}))},e.toggleModal=function(){e.setState((function(e){return{isModalOpen:!e.isModalOpen}}))},e.onImageClick=function(t){var a=e.state.images.find((function(e){return t===e.id}));e.setState({modalImage:a}),e.toggleModal()},e.addPage=function(){e.setState({pagesDisplayed:e.state.pagesDisplayed+1})},e.handleFormSubmit=function(t){t!==e.state.searchQuery?e.setState({searchQuery:t,images:[],pagesDisplayed:1}):e.addPage()},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=t.searchQuery,n=this.state.searchQuery,o=t.pagesDisplayed,i=this.state.pagesDisplayed;r===n&&o===i||(this.setState({status:z,isLoading:!0}),f.fetchImages(n,i).then(this.handleData).then((function(e){0===e.length?(1===i?h.b.error("No images for this query. Try another search"):h.b.error("No more images on Pixabay! You may add your images!"),a.setState({isLoadBtnShown:!1})):a.setState({isLoadBtnShown:!0}),a.setState({images:[].concat(Object(c.a)(a.state.images),Object(c.a)(e)),pagesDisplayed:i,status:W,isLoading:!1}),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){h.b.error(e.message),a.setState({error:e,status:V,isLoading:!1})})))}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.error,r=e.images,n=e.isModalOpen,o=e.modalImage,i=e.isLoadBtnShown,c=e.isLoading,s=this.handleFormSubmit,l=this.toggleModal,u=this.onImageClick,d=this.addPage;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(w,{onSubmit:s}),t===Y&&Object(j.jsx)(D,{type:"info",children:"No images yet. Please enter the query for search!"}),t===W&&0===r.length&&Object(j.jsx)(D,{type:"warning",children:"No search results..."}),t===V&&0===r.length&&Object(j.jsxs)(D,{type:"error",children:["ERROR OCCURRED! ",a.message]}),Object(j.jsx)(k,{images:r,onImgClick:u}),i&&Object(j.jsx)(N,{onClick:d,loading:c,children:"Load more..."}),Object(j.jsx)(h.a,{autoClose:3e3}),n&&Object(j.jsx)(q,{image:o,onClose:l}),c&&Object(j.jsx)(G,{type:"ThreeDots",color:"#3f51b5",height:180,width:180}),Object(j.jsx)(K,{type:"down"}),Object(j.jsx)(K,{type:"up"})]})}}]),a}(r.Component);i.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(Z,{})}),document.getElementById("root"))},9:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__2cDnu",SearchForm:"Searchbar_SearchForm__1gEOQ","SearchForm-button":"Searchbar_SearchForm-button__2cu33","SearchForm-button-label":"Searchbar_SearchForm-button-label__227HC","SearchForm-input":"Searchbar_SearchForm-input__30dbW"}}},[[48,1,2]]]);
//# sourceMappingURL=main.31e10316.chunk.js.map